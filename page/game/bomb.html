<DOCTYPE html>

<html>

	<head>
		<title> Sollys Dream </title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<style>
			body {
				margin: 0;
				padding: 0;
				width: 100%;
				height: 100%;
			}
			#bomb {
				position: absolute;
				background-color: black;
				width: 10vh;
				height: 10vh;
				left: 50%;
				top: 50%;
				margin-left: -5vh;
				margin-top: -5vh;
			}
			.player {
				position: absolute;
				background-color: blue;
				width: 5vh;
				height: 5vh;
				left: 50%;
				top: 50%;
				text-align: center;
			}

		</style>
	</head>

	<body> 

		
		
		<script>

			let bomb, playercontainer, player, myturn; // vars
			
						
			// init //
			let ws, room; window._init = (a, b) => { ws = a; room = b; console.log("Game initialized"); _start(); };
			function _start() {

				myturn = false;

				bomb = document.getElementById("bomb"); 
				playercontainer = document.getElementById("playercontainer"); 

				player = document.createElement("div");
				player.className = "player";

				let it = (Math.PI * 2) / Object.keys(room.players).length;
				let dir = 0;
				Object.keys(room.players).forEach((i) => {
					console.log(dir, i);

					if (!room.players[i].data.elem) {
						room.players[i].data.elem = player.cloneNode();
					}
					
					room.players[i].data.elem.style = `margin-left:${Math.sin(dir)*20-2.5}vh;margin-top:${Math.cos(dir)*20-2.5}vh;`;
					room.players[i].data.elem.innerHTML = room.players[i].name;

					playercontainer.appendChild(room.players[i].data.elem);
					
					dir += it;
				});

			}
			function _restart() {
				
				bomb.innerHTML = "";

				_start();
			}  
			// init //

			function msgevent(msg) { // already decoded json btw
				console.log(msg);

				switch (msg.type) {
					default:
						break;
				}

			}

		</script>

		<div id="bomb"> </div>
		<div id="playercontainer"> </div>

	</body>
